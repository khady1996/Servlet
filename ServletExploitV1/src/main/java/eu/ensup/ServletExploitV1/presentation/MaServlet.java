package eu.ensup.ServletExploitV1.presentation;

import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class MonServlet
 */
@WebServlet("/Accueil")
public class MaServlet extends HttpServlet {
	private static final long serialVersionUID = 1L;

	/**
	 * @see HttpServlet#HttpServlet()
	 */
	public MaServlet() {
		super();
		// TODO Auto-generated constructor stub
	}

	/**
	 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse
	 *      response)
	 */
	@Override
	protected void doGet(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		// TODO Auto-generated method stub
		response.getWriter().append("Served at: ").append(request.getContextPath());

		// 0. Récupérer le nom de la méthode HTTP avec laquelle cette demande a été
		// effectuée
		String methode = request.getMethod();
		System.out.println(
				"0- La méthode getMethod() permet la récupération du nom de la méthode HTTP avec laquelle cette demande a été effectuée\nElle retourne ici :"
						+ methode);
		// 1. Récupérer la session actuelle assossiée à la requête
		System.out.println(
				"1- La méthode getSession() permet la récupération de la session actuelle assossiée à la requête\nElle retourne ici : "
						+ request.getSession());
		// 2. Changer l'Id de cette session
		System.out.println(
				"2- La méthode changeSessionId() permet le changement de l'Id de cette session\nElle retourne ici : "
						+ request.changeSessionId());
		// 3. Renvoie l'URL de la requete
		System.out.println(
				"3- La méthode getRequestURI() permet la récupération de l'URL de la requete\nElle retourne ici :"
						+ request.getRequestURI());

		// 4. Renvoie la chaîne de requête contenue dans l'URL
		System.out.println(
				"4- La méthode getQueryString() permet la récupération de la chaîne de requête contenue dans l'URL\nElle retourne ici : "
						+ request.getQueryString());

		// 5. Renvoie toutes les informations de chemin supplémentaires associées à
		// l'URL envoyée par le client lors de sa demande
		System.out.println(
				"5- La méthode getPathInfo() permet la récupération des informations supplémentaires associées à l'URL envoyée\nElle retourne ici :"
						+ request.getPathInfo());

		// 6. Renvoie le port source IP du client qui a envoyé la demande
		System.out.println(
				"6- La méthode getRemotePort() permet la récupération du port du client demandeur\nElle retourne ici : "
						+ request.getRemotePort());

		// 7. Renvoie le numéro de port IP de l'interface sur laquelle la demande a été
		// reçue
		System.out.println(
				"7- La méthode getLocalPort() permet la récupération du port de l'interface sur laquelle la demande a été reçue\nElle retourne ici : "
						+ request.getLocalPort());

		// 8. Renvoie la partie de l'URI de la demande qui indique le contexte de la
		// demande

		System.out.println(
				"8- La méthode getContextPath() permet la récupération de la partie de l'URI de la demande qui indique le contexte de la demande\nElle retourne ici : "
						+ request.getContextPath());

		// 9. Renvoie le nom du codage de caractères utilisé dans le corps de cette
		// demande

		System.out.println(
				"9- La méthode getCharacterEncoding() permet la récupération du  nom du codage de caractères utilisé dans le corps de cette demande\nElle retourne ici : "
						+ request.getCharacterEncoding());

		// 10. Renvoie l'adresse IP de l'interface sur laquelle la demande a été reçue

		System.out.println(
				"10- La méthode getLocalAddr() permet la récupération de l'adresse IP de l'interface sur laquelle la demande a été reçue\nElle retourne ici : "
						+ request.getLocalAddr());
	}

	/**
	 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse
	 *      response)
	 */
	@Override
	protected void doPost(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		// TODO Auto-generated method stub
		this.doGet(request, response);
	}

}
